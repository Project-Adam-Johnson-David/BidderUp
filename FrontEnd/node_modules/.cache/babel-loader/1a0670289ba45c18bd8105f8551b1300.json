{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adamb\\\\P2\\\\Project2\\\\FrontEnd\\\\src\\\\Components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport Homepage from \"./Homepage\";\nimport Signup from \"./Signup\";\nimport 'react-notifications/lib/notifications.css';\nimport { NotificationManager, NotificationContainer } from \"react-notifications\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [username, setUsername] = useState(localStorage.getItem(\"username\") || \"\");\n  const [password, setPassword] = useState(\"\");\n  const [loggedIn, setLoggedIn] = useState(localStorage.getItem(\"loggedIn\") || false);\n  const [page, setPage] = useState(\"login\");\n  console.log(loggedIn);\n  React.useEffect(() => {\n    let username1 = localStorage.getItem(\"username\");\n    console.log(username1 + \"username??\"); // //currUser\n\n    setUsername(\"\");\n\n    if (username1 !== \"\") {\n      setUsername(username1);\n      console.log(\"code was here\");\n    } //\n    // logged in status\n\n\n    let loggedStatus = localStorage.getItem(\"loggedIn\") === 'true';\n    setLoggedIn(loggedStatus);\n  }, []);\n  React.useEffect(() => {\n    console.log(\"should be saved to local\" + username);\n    localStorage.setItem(\"username\", username);\n    localStorage.setItem(\"loggedIn\", loggedIn); // setPage(\"login\");\n  }, [loggedIn, username]);\n\n  function logOut() {\n    console.log(\"logged in was set false here\");\n    localStorage.setItem(\"loggedIn\", \"false\");\n    setLoggedIn(false);\n    setUsername(\"\");\n  }\n\n  function changePage() {\n    setPage(\"signup\");\n  }\n\n  async function submitForm(e) {\n    e.preventDefault();\n    console.log(username);\n    console.log(password);\n    let id = null;\n    let country = \"country\";\n    let balance = 4;\n    await axios({\n      method: 'post',\n      url: \"http://localhost:8080/user/login\",\n      data: {\n        username,\n        password,\n        id,\n        country,\n        balance\n      },\n      // params:{username, password},\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      let status = res.data;\n\n      if (status === 200) {\n        NotificationManager.success('Successful', 'Successfully logged in!');\n        setLoggedIn(true);\n        console.log(res.status);\n      } else {\n        NotificationManager.error('Unsuccessful', 'Sorry, we couldn\\'t login with the provided credentials'); // console.log(\"response was not 200\"+res.data);\n      }\n    }).catch(err => alert(err));\n  }\n\n  if (loggedIn === true) {\n    // console.log(loggedIn)\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Homepage, {\n        username: username,\n        logOut: logOut\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  } else {\n    if (page === \"login\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: submitForm,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => {\n              setUsername(e.target.value);\n            },\n            placeholder: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: e => {\n              setPassword(e.target.value);\n            },\n            placeholder: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Don't have an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: changePage,\n            children: \"Sign up here!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Signup, {\n          setPage: setPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this);\n    }\n  }\n}\n\n_s(Login, \"igYRvY51K1b08IiqQpMrrnv6PTQ=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/adamb/P2/Project2/FrontEnd/src/Components/Login.js"],"names":["React","useState","axios","Homepage","Signup","NotificationManager","NotificationContainer","Login","username","setUsername","localStorage","getItem","password","setPassword","loggedIn","setLoggedIn","page","setPage","console","log","useEffect","username1","loggedStatus","setItem","logOut","changePage","submitForm","e","preventDefault","id","country","balance","method","url","data","headers","then","res","status","success","error","catch","err","alert","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport axios from \"axios\";\r\nimport Homepage from \"./Homepage\";\r\nimport Signup from \"./Signup\";\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {NotificationManager, NotificationContainer} from \"react-notifications\";\r\n\r\nfunction Login(){\r\n    const [username, setUsername]= useState(localStorage.getItem(\"username\") || \"\");\r\n    const [password, setPassword]= useState(\"\");\r\n    const [loggedIn, setLoggedIn]= useState(localStorage.getItem(\"loggedIn\")||false);\r\n    const [page, setPage]=useState(\"login\");\r\n    console.log(loggedIn)\r\n\r\n    React.useEffect(() => {\r\n        let username1 = localStorage.getItem(\"username\")\r\n        console.log(username1+ \"username??\");\r\n        // //currUser\r\n        setUsername(\"\")\r\n        if(username1!==\"\"){\r\n            setUsername(username1)\r\n            console.log(\"code was here\");\r\n        }\r\n        //\r\n        // logged in status\r\n        let loggedStatus = (localStorage.getItem(\"loggedIn\")=== 'true');\r\n        setLoggedIn(loggedStatus)\r\n    }, [])\r\n\r\n    React.useEffect(()=>{\r\n        console.log(\"should be saved to local\"+username);\r\n        localStorage.setItem(\"username\", username);\r\n        localStorage.setItem(\"loggedIn\",loggedIn)\r\n        // setPage(\"login\");\r\n    },[loggedIn, username]);\r\n\r\n    function logOut(){\r\n        console.log(\"logged in was set false here\");\r\n        localStorage.setItem(\"loggedIn\",\"false\");\r\n        setLoggedIn(false);\r\n        setUsername(\"\");\r\n    }\r\n\r\n    function changePage(){\r\n        setPage(\"signup\")\r\n    }\r\n\r\n    async function submitForm(e){\r\n        e.preventDefault();\r\n        console.log(username);\r\n        console.log(password);\r\n\r\n        let id = null;\r\n        let country = \"country\";\r\n        let balance = 4;\r\n        await axios({\r\n            method: 'post',\r\n            url: \"http://localhost:8080/user/login\",\r\n            data: { username, password, id, country,balance},\r\n            // params:{username, password},\r\n            headers : {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => {\r\n            let status = res.data;\r\n            if(status===200){\r\n                NotificationManager.success('Successful', 'Successfully logged in!');\r\n                setLoggedIn(true);\r\n                console.log(res.status);\r\n            }\r\n            else{\r\n                NotificationManager.error('Unsuccessful', 'Sorry, we couldn\\'t login with the provided credentials');\r\n                // console.log(\"response was not 200\"+res.data);\r\n            }\r\n        })\r\n            .catch(err => alert(err));\r\n    }\r\n\r\n    if(loggedIn===true){\r\n        // console.log(loggedIn)\r\n        return (\r\n            <div>\r\n                <NotificationContainer/>\r\n                <Homepage username={username} logOut={logOut}/>\r\n            </div>\r\n        );\r\n    }\r\n    else{\r\n        if(page===\"login\"){\r\n            return (\r\n                <div>\r\n                    <NotificationContainer/>\r\n                    <form onSubmit={submitForm}>\r\n                        <p>Login</p>\r\n                        <input type=\"text\" onChange={e=>{setUsername(e.target.value)}} placeholder=\"Username\"/>\r\n                        <br/>\r\n                        <input type=\"password\" onChange={e=>{setPassword(e.target.value)}} placeholder=\"password\"/>\r\n                        <br/>\r\n                        <button>Login</button>\r\n                        <br/>\r\n                        <p>Don't have an account?</p>\r\n                        <button onClick={changePage}>Sign up here!</button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n            else{\r\n                return(\r\n                    <div>\r\n                        <Signup setPage={setPage} />\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}